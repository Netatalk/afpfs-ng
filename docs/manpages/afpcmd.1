.Dd January 26, 2026
.Dt AFPCMD 1
.Os afpfs-ng
.Sh NAME
.Nm afpcmd
.Nd Transfer files over the network using the Apple Filing Protocol (AFP)
.Sh SYNOPSIS
.Nm
.Op Fl rV
.Op Fl v Ar loglevel
.Ar afp_url
.Nm
.Op Fl rV
.Op Fl v Ar loglevel
.Ar afp_url
.Ar local_path
.Nm
.Op Fl rV
.Op Fl v Ar loglevel
.Ar local_path
.Ar afp_url
.Nm
.Fl h
.Sh DESCRIPTION
.Nm
is a command-line tool to help transfer files to and from a
server using AFP.
This server is typically either Netatalk running on a UNIX-like host,
or AppleShare Server running on Classic Mac OS or Mac OS X.
.Pp
This can be done as a non-root user.
It offers either an interactive
command-line (like a traditional FTP client) or for batch retrievals.
.Pp
Do not confuse this with the FUSE mounting tools (mount_afpfs, afpfsd,
afp_client), which offer the ability to mount an entire filesystem.
.Pp
Note that afpcmd depends on the
.Xr afpsld 1
AFP Stateless Client Daemon running in the background to manage the AFP connection
and commands. If not already running, afpcmd will attempt to start it.
.Sh OPTIONS
.Bl -tag -width Ds
.It Fl h , Fl -help
Shows the help message.
.It Fl r , Fl -recursive
Sets the recursive flag.
.It Fl V , Fl -verbose
Enables verbose mode for file transfers.
When enabled, displays detailed messages during upload and download operations,
including per-file transfer statistics.
By default, only a summary message is shown after each transfer completes.
.It Fl v , Fl -loglevel Ar level
Sets the log verbosity level.
Accepted values are
.Cm debug ,
.Cm info ,
.Cm notice ,
.Cm warning ,
and
.Cm error .
Default is
.Cm notice .
Logs are written to syslog.
.It Ar afp_url
Uses the standard AFP URL format.
.El
.Sh BATCH MODE
Batch file transfers allow uploading or downloading files or directories without entering the interactive shell.
.Pp
To download from a server:
.Dl Nm Op Fl rV Ar afp_url Ar local_path
.Pp
To upload to a server:
.Dl Nm Op Fl rV Ar local_path Ar afp_url
.Pp
If the
.Fl r
flag is provided, the transfer is recursive (for directories).
If the
.Fl V
flag is provided, detailed transfer information is displayed for each file.
.Sh INTERACTIVE MODE
If a URL is provided on the command line,
.Nm
connects and enters the
volume and directory specified.
.Pp
Standard readline keystrokes are enabled.
Command line completion (using
tab) and history (using up and down arrows) is provided.
Local filename
completion is enabled.
.Ss Most common commands
.Bl -tag -width Ds
.It Cm ls
Show files in current directory
.It Cm cd
Change directories on the server
.It Cm get Ar filename
Retrieve file (or directory, if afpcmd is launched with the
-r flag)
.It Cm put Ar filename
Upload file (or directory, if afpcmd is launched with the
-r flag)
.It Cm exit
Detach from current volume
.It Cm quit
Disconnect and quit
.El
.Ss Remote directory commands
.Bl -tag -width Ds
.It Cm pwd
Show current directory on server
.It Cm mkdir Ar directory
Create new directory
.It Cm rmdir Ar directory
Remove directory
.El
.Ss Remote file commands
.Bl -tag -width Ds
.It Cm mv Ar old_file Ar new_file
Rename
.Ar old_file
to
.Ar new_file
.It Cm cp Ar source_file Ar dest_file
Copy
.Ar source_file
to
.Ar dest_file
.It Cm touch Ar filename
Create a blank file or update time stamp on existing file
.It Cm view Ar filename
Show the contents of file
.It Cm chmod Ar mode Ar file
Change the mode of a file on the server
.It Cm rm Ar file
Remove file from the server
.El
.Ss Status commands
.Bl -tag -width Ds
.It Cm status
Show status of the connection and server
.It Cm df
Show the disk size and available space
.El
.Ss Local commands
.Bl -tag -width Ds
.It Cm lpwd
Show current local directory
.It Cm lcd Ar directory
Change local directory
.El
.Ss User management commands
.Bl -tag -width Ds
.It Cm pass
Change the password of the current user (if the UAM supports it)
.It Cm user Ar user
Set the user
.El
.Ss Other commands
.Bl -tag -width Ds
.It Cm help
Show a help message listing all commands.
.El
.Sh AFP URLS
A typical usage of
.Nm
is:
.Pp
.Bd -literal -offset indent
afp://username:password@servername/volume
.Ed
.Pp
The complete syntax of a URL is:
.Pp
.Bd -literal -offset indent
afp://username;AUTH=uamname:password@server:port/volume/path
.Ed
.Pp
If
.Sq -
(a minus) is provided as the password, the user is prompted for the password.
.Sh SEE ALSO
.Xr afpgetstatus 1
